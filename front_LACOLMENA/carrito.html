<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="CSS/carrito.css">
    <title>Carrito - LA COLMENA</title>
</head>
<body>
    <h1>üõí Carrito de Compras</h1>
    <a href="tienda.html">‚Üê Volver a la tienda</a>
    
    <div id="carrito-vacio" style="text-align: center; padding: 40px;">
        <h3>Tu carrito est√° vac√≠o</h3>
        <a href="tienda.html"><button>Ir a comprar</button></a>
    </div>
    
    <div id="carrito-contenido" style="display: none;">
        <div id="items-carrito"></div>
        
        <div class="resumen">
            <h3>Resumen</h3>
            <p>Subtotal: $<span id="subtotal">0</span></p>
            <p>Impuestos: $<span id="impuestos">0</span></p>
            <p id="linea-descuento" class="linea-descuento" style="display: none;">
                Descuento: -$<span id="descuento">0</span>
            </p>
            <p>Env√≠o: $<span id="envio">0</span></p>
            <p><strong>Total: $<span id="total">0</span></strong></p>

            <div class="seccion-cupon">
                <h3>¬øTienes un cup√≥n de descuento?</h3>
                <div class="contenedor-cupon">
                    <input 
                        type="text" 
                        id="input-cupon" 
                        placeholder="Ej: DESCUENTO10"
                        maxlength="20"
                        oninput="validarInputCupon(this)"
                    >
                    <button id="btn-aplicar-cupon" class="btn-cupon" onclick="aplicarCupon()">
                        Aplicar
                    </button>
                    <button id="btn-quitar-cupon" class="btn-cupon" onclick="quitarCupon()">
                        Quitar
                    </button>
                </div>
                <p id="mensaje-cupon" class="mensaje-cupon"></p>
            </div>
            
            <div style="margin-top: 20px;">
                <button onclick="vaciarCarrito()">Vaciar Carrito</button>
                <button onclick="crearOrden()" style="background: #4CAF50; color: white;">Comprar Ahora</button>
            </div>
        </div>
    </div>

    <script src="js/carrito.js"></script>
    <script>
        // Mostrar/ocultar l√≠nea de descuento autom√°ticamente
        const observer = new MutationObserver(() => {
            const descuento = document.getElementById('descuento');
            const lineaDescuento = document.getElementById('linea-descuento');
            
            if (descuento && lineaDescuento) {
                const valor = parseFloat(descuento.textContent);
                lineaDescuento.style.display = (valor > 0) ? 'block' : 'none';
            }
        });
        
        // Observar cambios en el elemento de descuento
        const descuentoElement = document.getElementById('descuento');
        if (descuentoElement) {
            observer.observe(descuentoElement, { 
                characterData: true, 
                childList: true, 
                subtree: true 
            });
        }
    </script>
</body>
</html>