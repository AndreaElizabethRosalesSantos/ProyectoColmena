<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LA COLMENA</title>
    <link rel="stylesheet" href="CSS/estilos.css">
    <link rel="stylesheet" href="CSS/admin.css">
    <link rel="stylesheet" href="CSS/login.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <link rel="icon" type="image/png" href="media/favicon.png">
    <!-- Cargar Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>

<body>
    <!--HEADER-->
    <div class="header-logo">
        <img src="media/header.gif" alt="Logo de la tienda">
    </div>

    <nav class="section-bar">
        <div class="left-sections">
            <a href="admin.html" class="active">ADMINISTRADOR</a>
        </div>

        <div class="right-icons">
            <div class="user-section" id="userSection">
                <span class="username-display"> <span id="usernameDisplay"></span></span>
                <button class="logout-btn" id="logoutBtn" title="Cerrar sesi贸n"></button>
        </div>
        
        <button class="login-btn" id="showLoginBtn" title="Iniciar sesi贸n"></button>
    </nav>

    <!--LOGIN -->
    <div class="auth-container" id="loginModal">
        <div class="auth-modal">
            <button class="close-modal" onclick="closeAuthModal()">&times;</button>
            <h2>Iniciar Sesi贸n</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email o Usuario</label>
                    <input type="text" id="loginEmail" name="email" required>
                    <span class="error-message" id="loginEmailError"></span>
                </div>

                <div class="form-group">
                    <label for="loginPassword">Contrase帽a</label>
                    <input type="password" id="loginPassword" name="password" required>
                    <span class="error-message" id="loginPasswordError"></span>
                </div>

                <!-- CAPTCHA -->
                <div class="captcha-container">
                    <div class="captcha-image" id="captchaContainer">
                        <img id="captchaImage" src="" alt="CAPTCHA">
                    </div>
                    <button type="button" class="captcha-reload" onclick="loadCaptcha()"> Nuevo Captcha</button>
                </div>

                <div class="form-group">
                    <label for="captchaInput">Ingresa el texto del CAPTCHA</label>
                    <input type="text" id="captchaInput" name="captcha" required autocomplete="off">
                    <span class="error-message" id="captchaError"></span>
                </div>

                <button type="submit" class="auth-button">Iniciar Sesi贸n</button>

                <div class="auth-links">
                    <a onclick="showForgotPassword()">驴Olvidaste tu contrase帽a?</a>
                    <span class="separator">|</span>
                    <a onclick="showRegister()">Crear cuenta</a>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL DE REGISTRO -->
    <div class="auth-container" id="registerModal">
        <div class="auth-modal">
            <button class="close-modal" onclick="closeAuthModal()">&times;</button>
            <h2>Crear Cuenta</h2>
            <form id="registerForm">
                <div class="form-group">
                    <label for="regName">Nombre Completo</label>
                    <input type="text" id="regName" name="name" required>
                    <span class="error-message" id="regNameError"></span>
                </div>

                <div class="form-group">
                    <label for="regEmail">Email</label>
                    <input type="email" id="regEmail" name="email" required>
                    <span class="error-message" id="regEmailError"></span>
                </div>

                <div class="form-group">
                    <label for="regUsername">Usuario</label>
                    <input type="text" id="regUsername" name="username" required>
                    <span class="error-message" id="regUsernameError"></span>
                </div>

                <div class="form-group">
                    <label for="regPhone">Tel茅fono</label>
                    <input type="tel" id="regPhone" name="phone" required>
                    <span class="error-message" id="regPhoneError"></span>
                </div>

                <div class="form-group">
                    <label for="regPassword">Contrase帽a</label>
                    <input type="password" id="regPassword" name="password" required>
                    <div class="password-strength" id="passwordStrength"></div>
                    <span class="error-message" id="regPasswordError"></span>
                </div>

                <div class="form-group">
                    <label for="regPasswordConfirm">Confirmar Contrase帽a</label>
                    <input type="password" id="regPasswordConfirm" name="passwordConfirm" required>
                    <span class="error-message" id="regPasswordConfirmError"></span>
                </div>
                <div class="form-group">
                    <label for="regDirection">Direcci贸n (Estado)</label>
                    <input type="text" id="regDirection" name="direction" required>
                    <span class="error-message" id="regDirectionError"></span>
                </div>

                <button type="submit" class="auth-button">Registrarse</button>

                <div class="auth-links">
                    <a onclick="showLogin()">驴Ya tienes cuenta? Inicia sesi贸n</a>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL DE RECUPERAR CONTRASEA -->
    <div class="auth-container" id="forgotPasswordModal">
        <div class="auth-modal">
            <button class="close-modal" onclick="closeAuthModal()">&times;</button>
            <h2>Recuperar Contrase帽a</h2>
            <p style="text-align: center; color: #666; margin-bottom: 20px;">
                Ingresa tu id y nueva contrase帽a
            </p>
            <form id="forgotPasswordForm">
                <div class="form-group">
                    <label for="regId">ID de usuario</label>
                    <input type="number" id="regId" name="id" min="1" required>
                    <span class="error-message" id="regIdError"></span>
                    
                    <label for="forgotPass">Nueva Contrase帽a</label>
                    <input type="password" id="forgotPass" name="contra1" required>
                    <span class="error-message" id="forgotPassError"></span>
                    
                    <label for="forgotPass2">Confirmar Contrase帽a</label>
                    <input type="password" id="forgotPass2" name="contra2" required>
                    <span class="error-message" id="forgotPass2Error"></span>
                </div>

                <button type="submit" class="auth-button">Restablecer Contrase帽a</button>

                <div class="auth-links">
                    <a onclick="showLogin()">Volver al inicio de sesi贸n</a>
                </div>
            </form>
        </div>
    </div>

    <!--CUERPO TIENDA-->
    <div>
        <!-- Secci贸n de Alta -->
        <section id="alta" class="seccion activa">
            <h2>Alta Productos</h2>
            <form id="formAlta" class="formulario">
                <div class="form-group">
                    <label for="altaCategoria">Categor铆a del producto:</label>
                    <input type="text" id="altaCategoria" name="categoria" required
                        placeholder="Ingrese la categoria del producto">
                </div>
                <div class="form-group">
                    <label for="altaNombre">Nombre del producto:</label>
                    <input type="text" id="altaNombre" name="nombre" required placeholder="Ingrese nombre del producto">
                </div>
                <div class="form-group">
                    <label for="altaImagen">Nombre de la imagen:</label>
                    <input type="text" id="altaImagen" name="imagen" required
                        placeholder="Ingrese el nombre de la imagen del producto">
                </div>
                <div class="form-group">
                    <label for="altaDescripcion">Descripci贸n:</label>
                    <input type="text" id="altaDescripcion" name="descripcion" required
                        placeholder="Ingrese la descripcion del producto">
                </div>
                <div class="form-group">
                    <label for="altaPrecio">Precio del producto:</label>
                    <input type="text" id="altaPrecio" name="precio" required
                        placeholder="Ingrese el precio del producto">
                </div>
                <div class="form-group">
                    <label for="altaDisponibilidad">Inventario:</label>
                    <input type="text" id="altaDisponibilidad" name="disponibilidad" required
                        placeholder="Ingrese la disponibilidad del producto">
                </div>
                <div class="form-group">
                    <label for="altaVentas">Ventas:</label>
                    <input type="text" id="altaVentas" name="ventas" required
                        placeholder="Ingrese las ventas del producto">
                </div>
                <div class="form-group">
                    <label for="altaOfertas">Oferta:</label>
                    <input type="text" id="altaOfertas" name="ofertas" required
                        placeholder="Ingrese en oferta(1) o sin oferta(0)">
                </div>
                <button type="submit" class="btn btn-primary">Agregar Producto</button>
            </form>
            <div id="mensajeAlta" class="mensaje"></div>
        </section>

        <!-- Secci贸n de Cambio -->
        <section id="cambio" class="seccion">
            <h2>Actualizar Productos</h2>
            <form id="formCambio" class="formulario">
                <div class="form-group">
                    <label for="cambioId">Id del producto:</label>
                    <input type="number" id="cambioId" name="id" required
                        placeholder="Ingrese el ID del producto a actualizar" min="1">
                </div>
                <div class="form-group">
                    <label for="cambioCategoria">Categor铆a del producto:</label>
                    <input type="text" id="cambioCategoria" name="categoria" required
                        placeholder="Ingrese la categoria del producto">
                </div>
                <div class="form-group">
                    <label for="cambioNombre">Nombre del producto:</label>
                    <input type="text" id="cambioNombre" name="nombre" required
                        placeholder="Ingrese el nombre del producto">
                </div>
                <div class="form-group">
                    <label for="cambioImagen">Nombre de la imagen:</label>
                    <input type="text" id="cambioImagen" name="imagen" required
                        placeholder="Ingrese el nombre de la imagen del producto">
                </div>
                <div class="form-group">
                    <label for="cambioDescripcion">Descripci贸n del producto:</label>
                    <input type="text" id="cambioDescripcion" name="descripcion" required
                        placeholder="Ingrese la descripcion del producto">
                </div>
                <div class="form-group">
                    <label for="cambioPrecio">Precio del producto:</label>
                    <input type="text" id="cambioPrecio" name="precio" required
                        placeholder="Ingrese el precio del producto">
                </div>
                <div class="form-group">
                    <label for="cambioDisponibilidad">Inventario:</label>
                    <input type="text" id="cambioDisponibilidad" name="disponibilidad" required
                        placeholder="Ingrese la disponibilidad del producto">
                </div>
                <div class="form-group">
                    <label for="cambioVentas">Ventas:</label>
                    <input type="text" id="cambioVentas" name="ventas" required
                        placeholder="Ingrese las ventas del producto">
                </div>
                <div class="form-group">
                    <label for="cambioOfertas">Oferta:</label>
                    <input type="text" id="cambioOfertas" name="ofertas" required
                        placeholder="Ingrese en oferta(1) o sin oferta(0)">
                </div>
                <button type="submit" class="btn btn-warning">Actualizar Producto</button>
            </form>
            <div id="mensajeCambio" class="mensaje"></div>
        </section>

        <!-- Secci贸n de Baja -->
        <section id="baja" class="seccion">
            <h2>Baja Productos</h2>
            <form id="formBaja" class="formulario">
                <div class="form-group">
                    <label for="bajaId">Id del producto:</label>
                    <input type="number" id="bajaId" name="id" required
                        placeholder="Ingrese el ID del producto a eliminar" min="1">
                </div>
                <button type="submit" class="btn btn-danger">Eliminar Producto</button>
            </form>
            <div id="mensajeBaja" class="mensaje"></div>
        </section>


        <!-- Modal General (Alta / Actualizar / Back) -->
        <div id="modalGeneral" class="modal">
            <div class="modal-content">
                <div class="modal-header" id="modalHeader">
                    <h3 id="modalTitulo"></h3>
                </div>

                <div class="modal-body">
                    <p id="modalMensajeAccion"></p>

                    <div id="modalInfo" class="modal-info">
                        <p><strong>ID:</strong> <span id="mId"></span></p>
                        <p><strong>Categor铆a:</strong> <span id="mCategoria"></span></p>
                        <p><strong>Nombre:</strong> <span id="mNombre"></span></p>
                        <p><strong>Imagen:</strong> <span id="mImagen"></span></p>
                        <p><strong>Descripci贸n:</strong> <span id="mDescripcion"></span></p>
                        <p><strong>Precio:</strong> <span id="mPrecio"></span></p>
                        <p><strong>Disponibilidad:</strong> <span id="mDisponibilidad"></span></p>
                        <p><strong>Ventas:</strong> <span id="mVentas"></span></p>
                        <p><strong>Ofertas:</strong> <span id="mOfertas"></span></p>
                    </div>

                    <p id="modalAdvertencia" class="advertencia" style="display:none;">
                        Esta acci贸n no se puede deshacer.
                    </p>
                </div>

                <div class="modal-footer">
                    <button id="btnCancelarGeneral" class="btn btn-cancelar">Cancelar</button>
                    <button id="btnAceptarGeneral" class="btn btn-danger">Aceptar</button>
                </div>
            </div>
        </div>

        <!-- Secci贸n Ventas Por Categorias -->
        <section>
            <h2>Ventas por Categoria</h2>

            <div class="grafica-container">
                <canvas id="ventasCategorias"></canvas>
            </div>
        </section>

        <!-- Secci贸n Ventas Total -->
        <section>
            <h2>Total de Ventas</h2>

            <div class="ventas-container">
                <div class="info-total">
                    <span class="icono"></span>
                    <p class="label">Total de productos vendidos:</p>
                    <p class="valor" id="totalVentas">$0.00</p>
                </div>
            </div>
        </section>

        <!-- Seccion Reporte de Inventario -->
        <section>
            <h2>Reporte de Inventario</h2>

            <div id="contenedorInventario"></div>
        </section>

    </div>

    <!-- FOOTER -->
    <footer class="main-footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-column">
                    <h4>La Colmena</h4>
                    <p>Miel 100% natural y productos derivados de la m谩s alta calidad desde 2020.</p>
                    <div class="social-links">
                        <a href="https://www.instagram.com/la_colmena.2025?igsh=dDc4am9peXUxMTR3" target="_blank">
                            <img src="media/insta.png" alt="Instagram" class="icono-red">
                        </a>
                        <a href="https://www.instagram.com/la_colmena.2025?igsh=dDc4am9peXUxMTR3" target="_blank">
                            <img src="media/face.png" alt="Instagram" class="icono-red">
                        </a>
                        <a href="https://www.instagram.com/la_colmena.2025?igsh=dDc4am9peXUxMTR3" target="_blank">
                            <img src="media/twitter.png" alt="Instagram" class="icono-red">
                        </a>
                    </div>
                </div>
                <div class="footer-column">
                    <h4>Informaci贸n</h4>
                    <ul>
                        <li><a href="nosotros.html">Sobre Nosotros</a></li>
                        <li><a href="tienda.html">Productos</a></li>
                        <li><a href="preguntas.html">Preguntas Frecuentes</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Servicio al Cliente</h4>
                    <ul>
                        <li><a href="contactanos.html">Contacto</a></li>
                        <li><a href="#">Env铆os</a></li>
                        <li><a href="#">Devoluciones</a></li>
                        <li><a href="#">T茅rminos y Condiciones</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Contacto</h4>
                    <ul class="contact-info">
                        <li> 449 - 456 - 7890</li>
                        <li>锔 lacolmena525@gmail.com</li>
                        <li> Calle Principal #123</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 La Colmena. Todos los derechos reservados.</p>
                <p>ESTA PAGINA ES UN PROYECTO ACADEMICO DE LA UNIVERSIDAD AUTONOMA DE AGUASCALIENTES</p>
            </div>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="js/admin.js"></script>
    <script src="js/auth.js"></script>
</body>

</html>